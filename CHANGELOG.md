# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 新增
- 待添加的新功能

### 修改
- 待修改的功能

### 修复
- 待修复的问题

## [1.2.2] - 2025-07-26

### 修改
- 版本升级和功能优化## [1.2.1] - 2025-07-26

### 修改
- 版本升级和功能优化## [1.2.0] - 2025-07-26

### 🏗️ 架构重构与优化
- **模块化架构设计**：将代码重构为多个专业化类
  - `GitOperations`：Git命令操作封装
  - `BranchManager`：分支管理和验证
  - `ConfigurationManager`：配置管理
  - `MergeWorkflow`：合并流程编排
  - `UIHelper`：用户界面交互
  - `ConfigHelper`：配置助手工具

### 🆕 新增功能
- **🔧 Git环境验证**：全面的环境检查功能
  - 检查Git仓库状态和远程连接
  - 验证主分支和目标分支配置
  - 检查功能分支模式配置
  - 提供详细的验证报告
- **📊 当前状态查看**：实时显示Git和配置状态
  - 显示当前分支和主分支信息
  - 显示是否为功能分支
  - 显示未提交更改状态
- **🔒 增强的并发控制**：防止操作冲突
  - 静态锁机制防止多个合并操作同时执行
  - 友好的并发操作提示
  - 操作状态管理和监控

### 🔧 功能改进
- **安全合并机制**：带冲突检测的智能合并流程
  - 自动检测合并冲突（UU, AA, DD等状态码）
  - 提供冲突处理选项（打开文件、中止合并、手动解决）
  - 支持等待用户解决冲突后自动继续
  - 冲突解决后自动提交合并结果
- **智能分支检测**：支持多种功能分支命名模式
  - 支持feature、feat、bugfix、hotfix、fix等分支模式
  - 可配置自定义分支命名规则
  - 更灵活的分支识别机制
- **配置验证增强**：全面的输入和配置验证
  - Git分支命名规则验证
  - 重复性检查和远程分支验证
  - 输入长度和格式验证
  - 配置项完整性验证
- **远程分支检查优化**：扩展主分支支持和验证
  - 支持main、master、release、develop分支
  - 使用git ls-remote验证远程分支存在性
  - 自动检测失败时的友好提示
  - 支持自定义主分支名称

### 🎯 用户体验提升
- **简化的配置管理界面**：更直观的配置操作
  - 分步式配置向导
  - 预设选项和自定义输入结合
  - 实时配置验证和反馈
- **增强的错误处理**：更详细的错误信息和自动回滚
  - 操作失败时的自动回滚机制
  - 详细的错误诊断信息
  - 友好的用户提示和建议
- **智能提示系统**：更好的用户引导
  - 操作步骤提示
  - 配置建议和最佳实践
  - 状态变化通知

### 🛡️ 安全性改进
- **输入验证增强**：Git分支命名规则和格式检查
- **操作安全**：合并前环境检查和自动回滚
- **命令安全**：Git命令注入防护
- **权限检查**：操作权限验证机制

### 📈 性能优化
- **减少Git命令调用**：智能缓存和批量操作
- **异步操作处理**：提高响应速度
- **优化远程分支检查逻辑**：减少网络请求
- **内存使用优化**：更高效的资源管理

### 📋 配置系统增强
- **功能分支配置**：`gitMergeHelper.featureBranchConfig`
  - 支持配置功能分支命名模式
  - 默认支持feature、feat、bugfix、hotfix、fix
  - 可动态添加和删除分支模式
- **主分支配置优化**：`gitMergeHelper.mainBranch`
  - 移除enum限制，支持任意自定义分支名
  - 增强远程分支验证
  - 自动检测主分支功能
- **目标分支管理**：`gitMergeHelper.targetBranches`
  - 支持动态添加和删除目标分支
  - 分支描述和验证机制
- **自动检测开关**：`gitMergeHelper.autoDetectMainBranch`
  - 智能主分支检测
  - 优先级和降级机制

### 🔄 工作流程优化
- **合并流程重构**：更清晰的步骤划分
- **错误恢复机制**：操作失败时的智能恢复
- **状态跟踪**：完整的操作状态监控
- **日志记录**：详细的操作日志和调试信息

## [1.1.7] - 2025-06-03

### 修改
- 版本升级和功能优化

## [1.1.6] - 2025-05-27

### 修改
- 增加提交后推送远程

### 🆕 新增功能
- 🔧 **合并冲突检测和处理**：智能检测合并冲突，提供多种解决方案
  - 自动检测冲突状态码（UU, AA, DD等）
  - 提供冲突处理选项（打开文件、中止合并、手动解决）
  - 支持等待用户解决冲突后自动继续
  - 冲突解决后自动提交合并结果
- 🌿 **改进的分支检查逻辑**：支持多种功能分支命名模式
  - 支持feature、feat、bugfix、hotfix、fix等分支模式
  - 可配置自定义分支命名规则
  - 更灵活的分支识别机制
- ✅ **配置验证机制**：全面的输入和配置验证
  - Git分支命名规则验证
  - 重复性检查和远程分支验证
  - 输入长度和格式验证
- 🔒 **并发控制**：防止多个合并操作同时执行
  - 静态锁机制和操作状态管理
  - 友好的并发操作提示
- 🌐 **完善的远程分支检查**：扩展主分支支持和验证
  - 支持main、master、release、develop分支
  - 远程分支存在性验证
  - 自动检测失败时的友好提示
  - 支持自定义主分支名称
- 📊 **Git环境验证**：全面的环境检查功能
  - 检查Git仓库状态和远程连接
  - 验证主分支和目标分支配置
  - 检查功能分支模式配置
- 📋 **当前状态查看**：实时显示Git和配置状态
  - 显示当前分支和主分支信息
  - 显示是否为功能分支
  - 显示未提交更改状态

### 🔧 功能改进
- **安全合并机制**：带冲突检测的智能合并流程
- **输入验证增强**：提交信息和配置项的完整验证
- **错误处理优化**：更详细的错误信息和自动回滚
- **用户体验提升**：智能提示和友好的交互界面
- **配置管理优化**：支持分步重置和配置信息展示

### 📋 配置更新
- **新增配置项**：`gitMergeHelper.featureBranchConfig`
  - 支持配置功能分支命名模式
  - 默认支持feature、feat、bugfix、hotfix、fix
- **更新配置项**：`gitMergeHelper.mainBranch`
  - 移除enum限制，支持任意自定义分支名
  - 增强远程分支验证

### 🛡️ 安全性改进
- **输入验证**：Git分支命名规则和格式检查
- **操作安全**：合并前环境检查和自动回滚
- **并发控制**：防止重复操作的锁定机制
- **命令安全**：Git命令注入防护

### 📈 性能优化
- 减少不必要的Git命令调用
- 优化远程分支检查逻辑
- 智能缓存配置信息
- 异步操作处理

### 📚 文档更新
- 更新README.md，添加所有新功能说明
- 新增IMPROVEMENTS.md详细改进文档
- 新增SUMMARY.md改进总结
- 完善故障排除和使用指南

## [1.1.4] - 2025-05-27

### 🔧 功能改进
- **合并冲突处理优化**：完善冲突检测和处理机制
  - 改进冲突状态码检测逻辑（UU, AA, DD等）
  - 优化冲突文件处理流程
  - 增强自动提交合并结果功能
- **分支检查逻辑增强**：扩展功能分支识别范围
  - 完善多种分支模式支持（feature、feat、bugfix、hotfix、fix）
  - 优化分支命名规则验证
- **配置验证机制**：加强输入验证和错误处理
  - 完善Git分支命名规则验证
  - 增强远程分支存在性检查
  - 优化配置项完整性验证

### 🛡️ 安全性改进
- 增强Git命令注入防护
- 完善操作权限检查机制
- 优化并发控制逻辑

## [1.1.3] - 2025-05-27

### 🆕 新增功能
- **Git环境验证**：全面的环境检查功能
  - 检查Git仓库状态和远程连接
  - 验证主分支和目标分支配置
  - 检查功能分支模式配置
- **当前状态查看**：实时显示Git和配置状态
  - 显示当前分支和主分支信息
  - 显示是否为功能分支
  - 显示未提交更改状态

### 🔧 功能改进
- **远程分支检查增强**：扩展主分支支持
  - 支持main、master、release、develop分支
  - 远程分支存在性验证
  - 自动检测失败时的友好提示
- **配置管理优化**：支持分步重置和信息展示
  - 完善配置信息展示功能
  - 支持选择性配置重置

## [1.1.2] - 2025-05-27

### 🔧 功能改进
- **并发控制机制**：防止多个合并操作同时执行
  - 实现静态锁机制和操作状态管理
  - 添加友好的并发操作提示
  - 优化操作状态检查逻辑
- **输入验证增强**：提交信息和配置项的完整验证
  - 完善分支名称格式检查
  - 增强输入长度和内容验证
  - 优化重复性检查机制

### 📈 性能优化
- 减少不必要的Git命令调用
- 优化远程分支检查逻辑
- 智能缓存配置信息

## [1.1.1] - 2025-05-27

### 🔧 功能改进
- **分支检查逻辑重构**：支持多种功能分支命名模式
  - 实现可配置分支模式系统
  - 支持feature、feat、bugfix、hotfix、fix等分支模式
  - 添加自定义分支规则配置功能
- **配置验证机制初步实现**：基础的输入和配置验证
  - Git分支命名规则验证
  - 基础的重复性检查
  - 输入格式验证

### 📋 配置更新
- **准备新增配置项**：为`gitMergeHelper.featureBranchConfig`做准备
- **配置结构优化**：改进配置管理架构

## [1.1.0] - 2025-01-27

### 新增
- 🔧 **配置管理功能**：全新的配置管理系统
- 🎯 **主分支配置**：支持设置main或master作为主分支
- 🔄 **自动检测主分支**：智能检测远程仓库的主分支名称
- 📋 **目标分支管理**：支持自定义添加、删除目标分支
- ⚙️ **配置重置**：一键恢复默认配置功能
- 📝 **配置管理命令**：新增"配置管理"命令，支持图形化配置

### 修改
- 🚀 **合并流程优化**：使用配置的主分支替代硬编码的master
- 📋 **目标分支扩展**：支持在uat、pre基础上添加更多目标分支（如dev、staging、prod等）
- 📖 **文档更新**：更新README.md和USAGE.md，添加详细的配置说明

### 功能特性
- 支持main/master主分支自动检测和手动配置
- 灵活的目标分支配置系统，支持无限扩展
- 完整的配置管理界面，支持图形化操作
- 向后兼容，默认配置保持原有行为

## [1.0.2] - 2025-05-27

### 更新
- 测试自动打包功能

## [1.0.1] - 2025-05-27

### 新增
- 自动版本升级脚本
- CHANGELOG自动管理功能
- 交互式打包工具

### 修改
- 优化菜单配置，改进when条件和group设置
- 改进SCM标题菜单、资源管理器右键菜单、编辑器右键菜单的显示逻辑

### 功能特性
- 支持语义化版本管理（patch/minor/major）
- 自动更新CHANGELOG.md文件
- 交互式打包流程，支持自定义发布说明

## [1.0.0] - 2024-01-01

### 新增
- Git分支合并助手插件初始版本
- 合并Feature分支功能
- 快速提交并合并功能
- 支持命令面板、右键菜单、SCM面板等多种调用方式
- 自动检测Git仓库状态
- 智能分支切换和合并流程

### 功能特性
- 自动化Git分支合并流程
- 支持多种合并策略
- 友好的用户界面和错误提示
- 完整的TypeScript类型支持 